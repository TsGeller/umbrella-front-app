<div class="wallet-row">
  <div class="wallet-card">
    <div class="card-top">
      <div class="card-text">
        <div class="card-name">Total Value</div>
        <div class="card-meta">
          <span class="dot"></span>
          <span class="muted">Portfolio</span>
        </div>
      </div>
      <div class="brand-mark">€</div>
    </div>
    <div class="card-bottom">
      <div class="balance">{{ walletValue | number: '1.0-2' }} €</div>
    </div>
  </div>

  <div class="wallet-card">
    <div class="card-top">
      <div class="card-text">
        <div class="card-name">PnL Today</div>
        <div class="card-meta">
          <span>Session</span>
          <span class="dot"></span>
          <span class="muted">Daily change</span>
        </div>
      </div>
      <div class="brand-mark" [ngClass]="dailyPnL >= 0 ? 'positive' : 'negative'">
        <svg viewBox="0 0 32 32" class="brand-icon" aria-hidden="true">
          <path
            d="M4 24l7-8 5 5 8-12"
            fill="none"
            stroke="currentColor"
            stroke-width="2.5"
            stroke-linecap="round"
            stroke-linejoin="round"
          />
          <circle
            [attr.cx]="24"
            [attr.cy]="9"
            [attr.r]="2"
            fill="currentColor"
            opacity="0.9"
          />
        </svg>
      </div>
    </div>
    <div class="card-bottom">
      <div class="balance">
        <span [ngClass]="dailyPnL >= 0 ? 'positive' : 'negative'">
          {{ dailyPnL >= 0 ? '+' : '' }}{{ dailyPnL | number: '1.0-2' }} €
        </span>
        <span class="muted pct">({{ pnlPercentage | number: '1.1-1' }}%)</span>
      </div>
    </div>
  </div>

  <div class="wallet-card">
    <div class="card-top">
      <div class="card-text">
        <div class="card-name">Your shares</div>
        <div class="card-meta">
          <span class="dot"></span>
          <span class="muted">Ownership</span>
        </div>
      </div>
      <div class="brand-mark">%</div>
    </div>
    <div class="card-bottom">
      @if (ownershipLoading) {
        <div class="muted">Loading...</div>
      } @else {
        @if (userOwnedValue !== null) {
          <div class="balance">{{ userOwnedValue | number: '1.0-2' }} €</div>
          @if (userOwnedPercentage !== null) {
            <div class="muted pct">{{ userOwnedPercentage | number: '1.0-2' }} %</div>
          }
        } @else {
          <div class="muted">{{ ownershipError || 'No positions detected.' }}</div>
        }
      }
    </div>
  </div>
</div>
