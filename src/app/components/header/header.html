<header class="header-shell">
  <div class="header-bar">
    <div class="nav-group">
      <div class="icon-group">
        <button class="icon-btn" type="button" aria-label="Home" (click)="goHome()">
          <svg viewBox="0 0 24 24" aria-hidden="true">
            <path
              d="M4 10.5 12 4l8 6.5V20a1 1 0 0 1-1 1h-4.5a.5.5 0 0 1-.5-.5V15a2 2 0 0 0-2-2h0a2 2 0 0 0-2 2v5.5a.5.5 0 0 1-.5.5H5a1 1 0 0 1-1-1z"
              fill="none"
              stroke="currentColor"
              stroke-width="1.5"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
          </svg>
        </button>
      </div>
      <div class="breadcrumb">
        <span class="muted-link">{{ brandName }}</span>
        <span class="crumb-sep">›</span>
        <span class="crumb-current">{{ pageTitle }}</span>
      </div>
    </div>

    <div class="action-group">
      <div class="icon-set">
        <div class="icon-pair">
          <button class="icon-btn ghost" type="button" aria-label="Réglages" routerLink="/settings">
            <span class="icon-img settings"></span>
          </button>
          <button class="icon-btn ghost" type="button" aria-label="Theme" (click)="toggleTheme()">
            <span class="icon-img" [ngClass]="isDark ? 'moon' : 'sun'"></span>
          </button>
        </div>
        <button class="icon-btn ghost" type="button" aria-label="Notifications">
          <span class="icon-img notification"></span>
        </button>
      </div>

      @if (isLoggedIn) {
        <div class="profile-menu" (click)="$event.stopPropagation()">
          <button
            type="button"
            class="profile-trigger"
            (click)="toggleProfileMenu()"
            [attr.aria-expanded]="isProfileMenuOpen"
          >
            <span class="profile-initial">{{ firstLetter }}</span>
            <svg
              class="chevron"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M6 9L12 15L18 9"
                stroke="currentColor"
                stroke-width="1.5"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
            </svg>
          </button>

          @if (isProfileMenuOpen) {
            <div class="profile-dropdown">
              <button type="button" (click)="goToChangePassword()">
                Change password
              </button>
              <button type="button" (click)="logout()">
                Logout
              </button>
            </div>
          }
        </div>
      } @else {
        <button class="login-pill" type="button" (click)="goToLogin()">
          <i class="pi pi-unlock"></i>
          <span>Login</span>
        </button>
      }

      <button class="cta" type="button">
        <i class="pi pi-share-alt"></i>
        <span>Share</span>
      </button>
    </div>
  </div>
</header>
