<section class="stock-card transactions-card">
  <header class="stock-card__header">
    <div>
      <span class="stock-card__eyebrow">Portfolio holdings</span>
      <h2>Stock positions</h2>
      <p>Monitor each line, its valuation, and allocation inside the portfolio.</p>
    </div>
    <div class="stock-card__metrics">
      <div class="metric">
        <span class="metric__label">Positions</span>
        <span class="metric__value">{{ stocks.length }}</span>
      </div>
      <div class="metric">
        <span class="metric__label">Total value</span>
        <span class="metric__value">{{ getTotalValue() | currency: 'EUR' }}</span>
      </div>
    </div>
  </header>

  <ng-container *ngIf="stocks.length; else emptyState">
    <div class="transaction-list">
      <div class="transaction-row" *ngFor="let stock of stocks">
        <div class="row-main">
          <span class="symbol-chip">{{ stock.ticker }}</span>
          <div class="row-text">
            <div class="row-title">{{ stock.name || stock.ticker }}</div>
            <div class="row-meta">
              <span class="muted">Shares: {{ stock.quantity }}</span>
              <span class="dot"></span>
              <span class="muted">Price: {{ stock.price | currency: 'EUR' }}</span>
              <span class="pill">Alloc {{ getValuePercentage(stock) | number: '1.0-2' }} %</span>
            </div>
          </div>
        </div>

        <div class="row-value">
          <span class="value">{{ stock.price * stock.quantity | currency: 'EUR' }}</span>
          <span
            class="pnl"
            [ngClass]="{ positive: stock.pnl > 0, negative: stock.pnl < 0 }"
          >
            {{ stock.pnl | currency: 'EUR' }}
          </span>
        </div>
      </div>
    </div>
    <button class="see-more" type="button">See more â†’</button>
  </ng-container>

  <ng-template #emptyState>
    <div class="empty-state">
      <span class="empty-icon">ðŸ“‰</span>
      <p>No holdings yet</p>
      <small>Add your first stock to begin tracking.</small>
    </div>
  </ng-template>
</section>
