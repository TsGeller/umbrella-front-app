<section class="stock-card">
  <header class="stock-card__header">
    <div>
      <span class="stock-card__eyebrow">Portfolio holdings</span>
      <h2>Stock positions</h2>
      <p>Monitor each line, its valuation, and allocation inside the portfolio.</p>
    </div>
    <div class="stock-card__metrics">
      <div class="metric">
        <span class="metric__label">Positions</span>
        <span class="metric__value">{{ stocks.length }}</span>
      </div>
      <div class="metric">
        <span class="metric__label">Total value</span>
        <span class="metric__value">{{ getTotalValue() | currency: 'EUR' }}</span>
      </div>
    </div>
  </header>

  <ng-container *ngIf="stocks.length; else emptyState">
    <div class="mat-table-wrapper">
      <table mat-table [dataSource]="stocks" class="stock-table mat-elevation-z0">
        <ng-container matColumnDef="symbol">
          <th mat-header-cell *matHeaderCellDef>Symbol</th>
          <td mat-cell *matCellDef="let stock">
            <span class="symbol-chip">{{ stock.stockName }}</span>
          </td>
          <td mat-footer-cell *matFooterCellDef></td>
        </ng-container>

        <ng-container matColumnDef="name">
          <th mat-header-cell *matHeaderCellDef>Name</th>
          <td mat-cell *matCellDef="let stock">{{ stock.name }}</td>
          <td mat-footer-cell *matFooterCellDef class="text-right label-footer">Total</td>
        </ng-container>

        <ng-container matColumnDef="shares">
          <th mat-header-cell *matHeaderCellDef class="text-right">Shares</th>
          <td mat-cell *matCellDef="let stock" class="text-right">{{ stock.quantity }}</td>
          <td mat-footer-cell *matFooterCellDef></td>
        </ng-container>

        <ng-container matColumnDef="price">
          <th mat-header-cell *matHeaderCellDef class="text-right">Price</th>
          <td mat-cell *matCellDef="let stock" class="text-right">{{ stock.price | currency: 'EUR' }}</td>
          <td mat-footer-cell *matFooterCellDef></td>
        </ng-container>

        <ng-container matColumnDef="value">
          <th mat-header-cell *matHeaderCellDef class="text-right">Value</th>
          <td mat-cell *matCellDef="let stock" class="text-right highlight">{{ stock.price * stock.quantity | currency: 'EUR' }}</td>
          <td mat-footer-cell *matFooterCellDef class="text-right highlight">{{ getTotalValue() | currency: 'EUR' }}</td>
        </ng-container>

        <ng-container matColumnDef="allocation">
          <th mat-header-cell *matHeaderCellDef class="text-right">Allocation</th>
          <td mat-cell *matCellDef="let stock" class="text-right">{{ getValuePercentage(stock) | number: '1.0-2' }} %</td>
          <td mat-footer-cell *matFooterCellDef class="text-right">100 %</td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        <tr mat-footer-row *matFooterRowDef="displayedColumns"></tr>
      </table>
    </div>
  </ng-container>

  <ng-template #emptyState>
    <div class="empty-state">
      <span class="empty-icon">ðŸ“‰</span>
      <p>No holdings yet</p>
      <small>Add your first stock to begin tracking.</small>
    </div>
  </ng-template>
</section>
